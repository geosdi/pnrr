{
  "global_legend": "",
  "name": "PNNR",
  "header_popup": "PNNR",
  "feature_sidebar": true,
  "strategy_features": "not_intersect",
  "leaflet": {
    "tooltip": [
      {
        "key": 0,
        "properties": [
          {
            "key": "COMUNE"
          }
        ]
      }
    ]
  },
  "sidebar_config": {
    "component": {
      "type": "accordion",
      "always": true
    },
    "header": true,
    "values": [
      {
        "layer": 0,
        "key": "name",
        "prefix": "Comune: ",
        "type": "h2"
      },
      {
        "layer": 0,
        "key": "prov_name",
        "prefix": "Provincia: ",
        "type": "h3"
      },
      {
        "layer": 0,
        "key": "reg_name",
        "prefix": "Regione: ",
        "type": "h3"
      }
    ]
  },
  "layers": [
    {
      "key": 0,
      "label": "Comuni"
    }
  ],
  "today": {
    "topo_json": [
      {
        "layer": 0,
        "tileserver": "https://tileserver.geosdi.org/data/istat-2025/{z}/{x}/{y}.pbf",
        "options": {
          "name": "comuni_istat_2025",
          "procom_comune_key_tileserver": "PRO_COM",
          "type": "comuni",
          "url": "https://raw.githubusercontent.com/openpolis/geojson-italy/refs/heads/master/topojson/limits_IT_municipalities.topo.json",
          "procom_comune_key_json": "com_istat_code_num"
        }
      }
    ]
  },
  "style": [
    {
      "layer": 0,
      "url": "https://raw.githubusercontent.com/geosdi/pnrr/refs/heads/main/pnnr_style.json"
    }
  ],
  "filter_config": {
    "url": "http://localhost:4200/geojson/pnrr/filters.json",
    "refresh": true,
    "filters_type": [
      {
        "filter_function": "textInclude",
        "binding_key": "PROGETTO IN ESSERE/NUOVO",
        "filter_on_fields": [
          "PROGETTO IN ESSERE/NUOVO"
        ],
        "layers": [
          0
        ]
      },
      {
        "filter_function": "textInclude",
        "binding_key": "Regione",
        "filter_on_fields": [
          "Regione"
        ],
        "layers": [
          0
        ]
      }
    ]
  },
  "join": [
    {
      "title": "Totale Progetti",
      "layer": 0,
      "key": 0,
      "file": "https://raw.githubusercontent.com/geosdi/pnrr/refs/heads/main/dati_PNRR_TabellaBase.json",
      "keys": [
        "PRO_COM",
        "PROCOM ISTAT_numero"
      ],
      "label_key": "TITOLO INTERVENTO",
      "show_other_features": [
        "CUP"
      ],
      "leaflet": {
        "tooltip": {
          "label": "Tot. Progetti"
        }
      },
      "feature_properties": [
        {
          "visible_properties": [
            "CUP",
            "SOGGETTO ATTUATORE",
            "Altri comuni interessati",
            "PROGETTO IN ESSERE/NUOVO",
            "Finanziamento_PNRR",
            "Valore_Progetto",
            "CATEGORIA INTERVENTO",
            "TIPOLOGIA INTERVENTO",
            "StatoLavori"
          ],
          "detail_properties": [
            {
              "name": "Valore_Progetto",
              "label": "Finanziamento Totale"
            }
          ],
          "extra_properties": [
            {
              "property": "CUP",
              "type": "group",
              "property_key": "Comune_Istat",
              "label": "Altri comuni interessati"
            }
          ],
          "fixed_properties": [
            "CUP",
            "SOGGETTO ATTUATORE",
            "Altri comuni interessati"
          ],
          "order_properties": [
            "CUP",
            "SOGGETTO ATTUATORE",
            "Altri comuni interessati",
            "PROGETTO IN ESSERE/NUOVO",
            "Finanziamento_PNRR",
            "Valore_Progetto",
            "CATEGORIA INTERVENTO",
            "TIPOLOGIA INTERVENTO",
            "StatoLavori"
          ]
        }
      ]
    }
  ]
}
